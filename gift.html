<script>
  const form = document.getElementById("giftForm");
  const notif = document.getElementById("notif");

  form.addEventListener("submit", e => {
    e.preventDefault();

    const data = new FormData(form);
    const params = new URLSearchParams();
    for (let pair of data) params.append(pair[0], pair[1]);

    fetch("https://script.google.com/macros/s/AKfycbykkMnmYEaD1-sVQWpMgBRyxapVrl88ykFwqw1N_xF8_iUmMJCiNtJj7TwbxbjZBaZ4XA/exec", {
      method: "POST",
      body: params
    })
    .then(() => {
      showNotif("Survey berhasil dikirim ðŸŽ‰", "success");
      form.reset();

      // PAKSA REDIRECT (GA NUNGGU RESPONSE GAS)
      setTimeout(() => {
        window.location.href = "https://ubedcrm.github.io/survey-ui/thankyou.html";
      }, 1200);
    })
    .catch(() => {
      showNotif("Terjadi error, coba lagi nanti", "error");
    });
  });

  function showNotif(msg, type) {
    notif.textContent = msg;
    notif.className = type;
    notif.style.display = "block";
    setTimeout(() => notif.style.display = "none", 3000);
  }
</script>
